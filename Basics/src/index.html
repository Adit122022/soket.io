<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WEB SOCKET</title>
    <style>
        *{
        margin: 0;
        padding: 0;
        box-sizing :border-box;
        }
        html,body{
        width :100%;
        height :100%;
        }
        body{ font-family: sans-serif; padding: 20px; background:#121212 ; color:#fff; ; }
        #log{ background: #000; padding: 10px; height: 300px; overflow-y: scroll; border:1px solid #333; }
        .status-on{ color: #00ff00;  }    
        .status-off{ color: #ff0000;  }  
        #message-form{ margin: 20px 0; display: flex; gap: 10px; }  
        #message-input{ width: 80%; padding: 10px; border:1px solid #333; background:#222; color:#fff; }
            #message-button{ padding: 10px 20px; border:none; background:#007bff; color:#fff; cursor: pointer; }
            #message-button:hover{ background:#0056b3; }
            .message-item{ margin-bottom: 10px; padding: 10px; background:#333; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>Web Socket Client</h1>
    <p id="status" class="status-off">Connecting........ </p>
   <form action="" id="message-form">
        <input type="text" id="message-input" placeholder="Type your message here..." autocomplete="off" required>
        <button id="message-button" type="submit">Deploy Message</button>
   </form>
    <h3 style="margin: 10px 0;">Live Stream Logs :</h3>
    <pre id="log"></pre>

    <script>
         const statusEl = document.getElementById('status');
         const log = document.getElementById('log');
         const input = document.getElementById('message-input');
         const form = document.getElementById('message-form');
         const socket = new WebSocket('ws://localhost:8080');

         const appending =(label,message)=>{
            if(label==="[YOU]") log.style.color ="green"
            const entry = `${new Date().toLocaleTimeString()} - ${label} : ${message}`;
           log.textContent += entry + '\n';
         }

         socket.addEventListener('open',()=>{
            statusEl.textContent = 'Connected : ws://localhost:8080';
            statusEl.classList.remove('status-off');
            statusEl.classList.add('status-on');
            appending('[System]','Connection Established');
         })
         socket.addEventListener('close',()=>{
            statusEl.textContent = 'Disconnected : ws://localhost:8080';
            statusEl.classList.remove('status-on');
            statusEl.classList.add('status-off');
            appending('[System]','Connection Closed');
         })
   
         socket.addEventListener('message',(event)=>{
            appending('[Server]',event.data);
         })
            form.addEventListener('submit',(e)=>{
                e.preventDefault();
                const message = input.value.trim();
                if(socket.readyState !== WebSocket.OPEN) appending('[Error]','No Active Tunnel')
                if(message){
                    socket.send(message);
                    appending('[You]',message);
                    input.value = '';
                }
            })
   </script>
</body>
</html>